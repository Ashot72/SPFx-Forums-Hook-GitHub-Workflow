<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
a:link, span.MsoHyperlink
	{color:#0563C1;
	text-decoration:underline;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-US link="#0563C1" vlink="#954F72" style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><a
name="_Hlk119327532"></a><span style='font-size:20.0pt;line-height:107%;
color:black'>SPFx Forums Hook GitHub Workflow</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-size:20.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES style='font-size:14.0pt;line-height:107%;
color:black'>Video: <a href="https://youtu.be/QkizlUCVYSY" target="_blank">https://youtu.be/QkizlUCVYSY</a></span></p>

<p class=MsoNormal><span lang=ES style='font-size:14.0pt;line-height:107%;
color:black'>GitHub Repo: <a
href="https://github.com/Ashot72/SPFx-Forums-Hook-GitHub-Workflow"
target="_blank">https://github.com/Ashot72/SPFx-Forums-Hook-GitHub-Workflow</a></span></p>

<p class=MsoNormal><span lang=ES style='font-size:14.0pt;line-height:107%;
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>GitHub
Workflows (Actions) is a continues integration and continues delivery (CI/CD)
platform that allows you to automate your build, test and deployment pipeline.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
are going to build our own GitHub action workflows for SPFx Forums Hook webpart
that we have already built </span><a
href="https://github.com/Ashot72/SPFx-Forums-Hook" target="_blank"><span
style='font-size:14.0pt;line-height:107%'>https://github.com/Ashot72/SPFx-Forums-Hook</span></a></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
will test, build and generate Forums Hooks package which we can upload it
manually, but we are going to automate even the package deployment to App Catalog.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=881 height=81 id="Picture 4"
src="index_files/image001.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
1</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>There
are basically three main blocks to understand when working with GitHub Actions.
That would be <i>Workflows</i>, <i>Jobs</i> and <i>Steps</i>. We have a code
repository on</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>GitHub
and that is important because this is a GitHub feature and it is related to repositories
on GitHub. We typically store some code in there. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=921 height=511 id="Picture 5"
src="index_files/image002.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
2</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>The
important thing is that workflows are attached to those GitHub repositories.
You can add workflows to GitHub repositories and you can add as many workflows
as you </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>want
to a given repository. Such a workflow includes one or more jobs. That is the
next important block, <i>Jobs</i><b>.  </b>So, we have workflows that belong to
repositories and then it </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>those
workflows we have jobs. Those jobs then contain one or more <i>steps</i> that
will be executed in the order in which they are specified. These steps define
the</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>actual
things that will be done. For example, download the code in the first step,
install the dependences in the second step, and run automates test in the</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>third
step. That is what we can do with GitHub Actions and with such a workflow that
contains a job with the appropriate steps. You can have as many</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>workflows
as you want and as many jobs per workflow as you want and as many steps in a
job as you want.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=881 height=421 id="Picture 6"
src="index_files/image003.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
3</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>With
GitHub actions we assign so called triggers or events to our workflows. These
events define when a given workflow will be executed. For example,</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>you
could add an event that requires manual activation of a workflow, but you could
also add an event that triggers and executes a workflow</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>whenever
a new commit is pushed to a certain branch.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Every
job defines a so-called <i>runner </i>which is simply the execution
environment, the machine and operating system that will be used for executing</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>the
steps. With GitHub actions, these runners can either be runners that are
predefined by GitHub. They offer runners for Linux, Mac OS, and Windows</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>but
we can also configure our own runners. Jobs as we said define some steps that
will be executed in the runner environment, on the machine</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>we
specified. If we have multiple jobs, they run in parallel by default, but you
can configure them to run in sequential order, so one job after another.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>You
can also set up conditional jobs which will not always run, but which instead
need a certain condition to be met.</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Steps</span></i><span style='font-size:14.0pt;line-height:107%;
color:black'> belong to jobs, and a job can have one or more steps. A step is
either a shell script a command in the command line that should be executed,</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>or
an action, which is another important building block. Actions in the context of
GitHub action are predefined scripts that perform a certain task</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
can build our own actions if we need to or use third-party actions, but for
simple tasks, we can also execute a command in the command line.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Steps
are executed in order, they do not run in parallel, but instead step after step
and they can also be conditional.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=834 height=573 id="Picture 7"
src="index_files/image004.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
4</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Actions
in the repository are stored in a <i>.github</i>/<i>workflows</i> subfolder having
yml or yaml extension.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
is where we should store our GitHub workflows so that GitHub is able to detect
them.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=834 height=573 id="Picture 8"
src="index_files/image005.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
5</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
give an action a <i>name</i>, by specifying our workflow name. After it we
should define when the workflow should be executed.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
do it by adding <i>on</i> key. The on key is just like name and after it we
define the event or the events that should trigger the workflow to run.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>GitHub
actions define many events which we can listen. Here we defined <i>push </i>event
and the event runs when you push a commit or tag.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
also specified <i>develop</i> branch and our workflow will run when we push to <i>develop</i>
branch.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1061 height=411 id="Picture 11"
src="index_files/image006.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
6</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Let</span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>s take a closer look at workflow triggers and events and to be
clear that is the same thing.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>GitHub
actions actually offers tons of events you can listen to. Most of them are
repository related and there you got events like a <i>push </i></span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>happening
or a <i>pull_request</i> being opened or maybe a new branch was created or a
repository was forked or an issue was opened or detected.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>There
also are some other events. <i>workflow_dispatch</i> which allow us to manually
trigger workflows. We also have <i>repository_dispatch </i></span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>which
we allow us to send REST API request to a specific GitHub API to trigger a
workflow. We can schedule a workflow by running every day at</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>8:00
AM for example. We also allow a workflow to be called by other workflows as
something we will explore in our project.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1130 height=599 id="Picture 9"
src="index_files/image007.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
7</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>On
</span><a
href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows"
target="_blank"><span style='font-size:14.0pt;line-height:107%'>https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows</span></a><span
style='font-size:14.0pt;line-height:107%;color:black'> page you see all the
events that can trigger a workflow and how exactly these events are triggered.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1241 height=755 id="Picture 10"
src="index_files/image008.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
8</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Here
in the example of the <i>pull_request</i> event it shows which variations of
that event can trigger a workflow. For pull_request case,</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>the
workflow should be triggered when a new pull_request is <i>opened</i> or maybe
when it is <i>closed</i> or any other variations.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=661 height=331 id="Picture 13"
src="index_files/image009.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
9</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Actions
are another key building block or component of GitHub Actions. Action is simply
a custom or third-party application</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>that
performs a typically complex, frequently repeated task. For example, fetching
the code from a GitHub repository, and</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>downloading
it onto a runner machine. The alternative to such action is a command that</span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>s defined with help of the </span><span style='color:black'>'</span><span
style='font-size:14.0pt;line-height:107%;color:black'>run</span><span
style='color:black'>'</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>keyword
in your YAML file.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=777 height=825 id="Picture 14"
src="index_files/image010.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
10</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
have used <i>run</i> command in our workflow. With this </span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>run</span><span style='color:black'>'</span><span
style='font-size:14.0pt;line-height:107%;color:black'> command we simply
execute typically simple shell commands</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>on
that runner machine and these commands are written down by us. Actions on the
other hand, are predefined applications,</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>which
actually also can be distributed through a marketplace because you can build
you own actions. You can also use official </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>or
community actions.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1044 height=551 id="Picture 15"
src="index_files/image011.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
11</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
is the official Checkout action which is created and maintained be the GitHub
team. Marketplace actions do not cost money.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=668 height=627 id="Picture 16"
src="index_files/image012.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
12</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>So
here in our code we use <i>checkout</i> action. And with that, this is all we
have to do for this action.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1049 height=571 id="Picture 17"
src="index_files/image013.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
13</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>To
see it in action I created a workflow where we run Linux <i>ls</i> (list files
and directories) shell command before and after the checkout. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>The
event is <i>workflow_dispatch </i>to allow us to manually trigger workflows.
You see we run it on <i>Ubuntu runner</i> which is the modern, </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>open-source
operating system on Linux.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1084 height=551 id="Picture 18"
src="index_files/image014.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
14</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Here
we run the workflow manually.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1122 height=493 id="Picture 19"
src="index_files/image015.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
15</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>It
is running.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=990 height=765 id="Picture 20"
src="index_files/image016.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
16</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>You
can see that before the checkout nothing on our ubuntu machine but after the
checkout the repository code has been loaded.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1000 height=755 id="Picture 21"
src="index_files/image017.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
17</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
is our repository.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=905 height=594 id="Picture 22"
src="index_files/image018.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
18</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Here,
we defined two jobs in the workflow.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1117 height=528 id="Picture 24"
src="index_files/image019.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
19</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>You
see these two jobs are running in parallel and release job has already been
executed. Then run simultaneously.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=988 height=569 id="Picture 25"
src="index_files/image020.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
20</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>The
total time duration in this case 15 second which is not the sum of the
individual durations. This proves that they run in parallel.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=731 height=785 id="Picture 26"
src="index_files/image021.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
21</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
our project for these <i>generate-package</i> and <i>deploy to tenant</i> jobs
it makes sense to run them after each other</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>instead
of in parallel. Because we probably only want to deploy to tenant if package
has successfully been generated.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>If
we got a failing package generation we do not want to deploy. To run jobs after
each other we just have to add one simple</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>keyword
to the job and that is the <i>needs</i> keyword. With <i>needs</i> we can point
to the identifier of another job that must be finish</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>before
this job. In this case I add <i>generate-package </i>to clarify that <i>deploy-to-tenant</i>
job needs the <i>generate-package </i>job to have</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>finished
before the deployment. We could wrap <i>needs </i>in brackets to wait for
multiple jobs to finish such as </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>needs:
[job1, job2, job3]</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1122 height=399 id="Picture 27"
src="index_files/image022.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
22</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Here
we can see that they run after each other which is also reflected visually
here. We see that deploy will only start</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>after
the package has been generated. Overall, this workflow will take longer because
now the jobs do not run in parallel.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Sometimes
we have some certain actions that needs some metadata from the environment, for
example we could work</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>with
environment variables something we will explore later.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Let</span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>s create a simple workflow.</span></p>

<p class=MsoNormal><img border=0 width=660 height=440 id="Picture 29"
src="index_files/image023.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
23</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
name it <i>Output Information</i>. We trigger this workflow manually with <i>workflow_dispatch</i>.
We define one job naming it <i>info</i></span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
job runs on ubuntu-latest. We want to output some information that is
automatically passed into these jobs and steps.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
meta information is named <i>context</i>. GitHub actions creates some context
data with various piece of information about</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>the
event trigger, runner and other things that can be accessed inside of steps. In
the first step we output <i>GitHub context</i>,</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>which
is an object or a collection of data with some general information about the
workflow and the event triggers.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
are outputting data we are getting from GitHub. That is <i>github</i>
identifier. To access the dynamic value in the command</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>we
use special syntax ${{ }}.  In this case it is ${{ github }} key. To make it
readable we wrap it in a function toJSON.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=964 height=640 id="Picture 28"
src="index_files/image024.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
24</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>If
we search for GitHub actions context  </span><a
href="https://docs.github.com/en/actions/learn-github-actions/contexts"
target="_blank"><span style='font-size:14.0pt;line-height:107%'>https://docs.github.com/en/actions/learn-github-actions/contexts</span></a><span
style='font-size:14.0pt;line-height:107%;color:black'> we see github object and
other contexts that we are going to use in our workflows.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=872 height=799 id="Picture 30"
src="index_files/image025.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
25</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
see that these data here are all fetched from this GitHub object context. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1258 height=507 id="Picture 31"
src="index_files/image026.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
25</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Before
exploring the other features of GitHub actions, I would like do draw our
workflow. We have two workflows. First one is <i>Build Workflow</i> (build.yml)</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>running
on <i>push</i> event. The other one is <i>Deploy Workflow </i>running on <i>pull_request</i>
event. They use reusable workflow <i>shared.yml </i>which in its turn uses a</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>custom
action to cache and install dependencies.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
GitHub Actions <i>Artifacts </i>allow you to share data between jobs in a
workflow and store once that workflow has completed.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>An
artifact is a file or collection of files produced during a workflow run. For
example, you can use artifacts to save your build</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>and
test output after a workflow run has ended.  Storing artifacts uses storage
space on GitHub.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Artifacts
are uploaded during a workflow run and you can view an artifact</span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>s name and size in the UI. When an artifact is</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>downloaded
using GitHub UI, all files that were individually uploaded as part of the
artifact get zipped together into a </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>single
file.</span></p>

<span style='font-size:14.0pt;line-height:107%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1083 height=691 id="Picture 32"
src="index_files/image027.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
27</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
our shared.yml file, in the reusable workflow you see that we generated our
SPFx package in <i>Gulp bundle and package</i> <i>solution</i> step and
uploaded it to </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>storage
space. We name it <i>package </i>and also are specifying the path of the
package in our runner. SPFx packages are generated in <i>sharepoint/solution </i>folder.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1147 height=714 id="Picture 33"
src="index_files/image028.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
28</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>On
the workflow page under the artifacts, you can see <i>package </i>That is the
package we uploaded from the runner to storage space.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=641 height=612 id="Picture 34"
src="index_files/image029.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
29</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
can download the package to our machine by clicking the package.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=608 height=273 id="Picture 35"
src="index_files/image030.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
30</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
have our SPFx package there. There can be more than one file inside the zip
file but in our case, we just need the SPFx package only.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1198 height=362 id="Picture 36"
src="index_files/image031.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
31</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Both
build and deploy workflows generate our SPFx package. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Rather
than copying and pasting from one workflow to another, we can make workflows
reusable. Our build and deploy workflows call <i>shared</i> reusable</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>workflow.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1246 height=638 id="Picture 38"
src="index_files/image032.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
32</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Reusable
workflows are YAML-formatted files, very similar to any other workflow file. As
with other workflow files, you locate reusable workflows</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>in
the .github/workflows directory of a repository. For a workflow to be reusable,
the values for <i>on </i>must include <i>workflow_call</i> We can define inputs</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>and
secrets, which can be passed from the caller workflow and then used within the
called workflow. You see that we specified <i>should-test</i> input and we pass
<i>true</i></span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>from
the <i>build</i> workflow and <i>false </i>from <i>deploy</i> one.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=626 height=814 id="Picture 40"
src="index_files/image033.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
33</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
the reusable workflow we make Unit test conditional. If <i>should-test</i>
passed has <i>true</i> value then <i>npm run test</i> will be called, otherwise
will not. This means that when deploying the package (with false)</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>then
we actually skip unit testing.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1268 height=816 id="Picture 41"
src="index_files/image034.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
34</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>That
can be seen visually as well. When <i>build</i> workflow is running then Unit
testing step is executed and we see the result.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1018 height=640 id="Picture 42"
src="index_files/image035.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
35</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
we build the package in <i>deploy </i>workflow you see we skipped unit testing.
</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>As
we mentioned there are tons of actions distributed through a marketplace but sometimes,
we need to create our own actions.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=921 height=341 id="Picture 43"
src="index_files/image036.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
36</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
can create three types of actions. The file name should be either action.yml or
action.yaml. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Docker</span></i><span style='font-size:14.0pt;line-height:107%;
color:black'> containers allows you to use specific versions of an operating
system, dependencies, tools, and code. For actions that must</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>run
in a specific environment configuration, Docker is an ideal option because you
can customize the operating system and tools.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Javascript Actions</span></i><span style='font-size:14.0pt;
line-height:107%;color:black'> can run directly on a runner machine, and
separate the action code from the environment used to run the code.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Using
a Javascript action simplifies the action code. To ensure your Javascript
actions are compatible with GitHub-hosted runners</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>(Ubuntu,
Windows, macOS) the packaged Javascript code you write should be pure
Javascript and not reply on other binaries.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Composite Action </span></i><span style='font-size:14.0pt;
line-height:107%;color:black'>allow you to combine multiple workflows steps
within one action. For example, you can use this feature to bundle</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>together
multiple run commands into an action, and then have a workflow that executes
the bundled commands as a single step</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>using
that action.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1177 height=574 id="Picture 44"
src="index_files/image037.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
37</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
our project we use <i>Composite</i> custom action. We must use <i>using: </i></span><span
style='color:black'>'</span><i><span style='font-size:14.0pt;line-height:107%;
color:black'>composite</span></i><span style='color:black'>'</span><span
style='font-size:14.0pt;line-height:107%;color:black'> This composite custom
action is meant for getting dependencies and cache them.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>It
has <i>inputs</i> parameter <i>caching</i> telling it whether cache
dependencies or run <i>npm install </i>command each time this custom action is
running. It also specifies <i>outputs </i>parameter</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>which
says if it is cached or not. We are caching dependencies to speed up workflows.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1360 height=724 id="Picture 46"
src="index_files/image038.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
38</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>To
cache dependencies for a job, we use <i>actions/cache</i> action. The action
creates and restores a cache identified by a unique key. We create a new cache
when packages</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>in
<i>package-lock.json</i> file change, the cache key uses contexts and
expressions to generate a key that includes the runner</span><span
style='color:black'>'</span><span style='font-size:14.0pt;line-height:107%;
color:black'>s operating system and SHA-256 hash of the</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>package-lock.json
file. So, when a new package added or updated, we run <i>npm install</i>
command and install dependencies.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
can use the output of the <i>cache</i> action to do something based on whether
a <i>cache hit</i> or miss occurred. When an exact match is found for a cache
for the specified</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>key</span></i><span style='font-size:14.0pt;line-height:107%;
color:black'>, the <i>cache-hit</i> output is set to <i>true</i>. In our custom
action we install dependencies if <i>cache-hit</i> is false or we enforce
dependency installation with <i>caching</i> inputs setting <i>false</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1410 height=403 id="Picture 47"
src="index_files/image039.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
39</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>You
can see Caches under <i>Actions</i> tab.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1200 height=790 id="Picture 48"
src="index_files/image040.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
40</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
we run <i>build</i> workflow for the first time you see that there was no
caching and <i>run nm ci</i> is called to install dependencies.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1287 height=535 id="Picture 49"
src="index_files/image041.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
41</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Outputs</span></i><span style='font-size:14.0pt;line-height:107%;
color:black'> from our custom action is <i>false</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1305 height=542 id="Picture 50"
src="index_files/image042.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
42</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
we run the workflow the second time then it reads form the cache, and <i>Cache
used?</i> output is <i>true</i>. In this case the execution time is 17 seconds
as compared to the first time (not cached)</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>when
it was 39 seconds.</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>Composite Actions</span></i><span style='font-size:14.0pt;
line-height:107%;color:black'> looks very similar to <i>Reusable Workflows</i>
but with reusable workflows you have a <i>very rich log </i>of what is
happening, and every single job and step is logged</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>independently
in real time.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1285 height=833 id="Picture 51"
src="index_files/image043.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
43</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>This
is our reusable shared.yml workflow and you see what is happening, and every
single job and step is logged independently in real time.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1404 height=755 id="Picture 52"
src="index_files/image044.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
44</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>With
composite actions, instead, all you have is a <i>single log</i> of a single
step even if it contains multiple steps. You see that there is no step info
such as <i>Cache dependencies </i>and <i>Install dependencies</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1310 height=628 id="Picture 53"
src="index_files/image045.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
45</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
just see <i>npm ci</i> command running in Load &amp; cache dependencies <i>step</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1090 height=741 id="Picture 54"
src="index_files/image046.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
46</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
our build workflow, when we intentionally making the unit test failing, you see
that the workflow breaks and stops. Sometimes, we need a workflow to be
executed even if a job or step is failing. </span></p>

<p class=MsoNormal><img border=0 width=1080 height=694 id="Picture 55"
src="index_files/image047.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
47</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Here
I created a workflow with 3 steps. On <i>test</i> step we ended it with <i>exit
1</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1079 height=663 id="Picture 60"
src="index_files/image048.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
48</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
see that it breaks and did not reach <i>report</i> step.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1015 height=743 id="Picture 57"
src="index_files/image049.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
49</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
modified the workflow by adding <i>continue-on-error: true </i>in <i>test</i>
step which will prevent the workflow form failing when <i>test</i> step is
failing.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=949 height=576 id="Picture 58"
src="index_files/image050.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
50</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
this case though we are still getting the error, but <i>report</i> step
executed.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=618 height=820 id="Picture 61"
src="index_files/image051.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
51</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
or <i>deploy</i> workflow after generating a package we have to download it to
deploy to an organization tenant. You remember we uploaded the package to
storage space on </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>GitHub
(Figure 27) with <i>package </i>name. Now, we are downloading the artifact to
install it on an organization app catalog.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=581 height=811 id="Picture 62"
src="index_files/image052.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
52</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
order to login to a tenant using CLI for Microsoft 365 we use <i>pnp/action-cli</i>
third party action. To authenticate we should pass</span></p>

<p class=MsoNormal><i><span style='font-size:14.0pt;line-height:107%;
color:black'>admin username</span></i><span style='font-size:14.0pt;line-height:
107%;color:black'> and <i>admin password. </i>In GitHub actions encrypted
secrets allow you to store sensitive information in your organization,
repository</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>or
repository environment. We will use that feature to encrypted our username and
password.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1123 height=738 id="Picture 63"
src="index_files/image053.jpg"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
53</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
should select <i>Settings </i>then click on <i>Actions </i>to add <i>New
repository secret</i>. You see that I already set ADMIN_USERNAME and
ADMIN_PASSWORD secrets.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1253 height=689 id="Picture 64"
src="index_files/image054.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
54</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>You
set your secret and after saving it you will not be able to see the secret, but
you can always re-set it.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=823 height=523 id="Picture 65"
src="index_files/image055.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
55</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>I
created a workflow to print both admin user name and password encrypted.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=937 height=599 id="Picture 66"
src="index_files/image056.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
56</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>It
Is not possible to see them as GitHub actions will not allow us to reveal it.
It knows that they are coming from secrets and it writes characters *** instead
of the actual secret value.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
you run <i>deploy </i>workflow you may not be able login to your organization
using <i>pnp/action-cli.</i> Because you may not have an access to PNP
Management Shell.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=856 height=193 id="Picture 67"
src="index_files/image057.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
57</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>For
that reason, an admin has to <i>Connect-PnPOnline </i>and run <i>Register-PnPManagementShellAccess</i>
command.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>PnP
Management Shell only uses delegated permission and is prepared with all the
necessary scopes to utilize every cmdlet in PnP PowerShell.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Not
all organizations are keen to consent to all of the scopes.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=568 height=765 id="Picture 68"
src="index_files/image058.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
58</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Then
you will be presented with a large dialog where you can consent. If you are an
admin you can consent for your organization. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=590 height=803 id="Picture 69"
src="index_files/image059.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
59</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>After
<i>Login to tenant</i> step, we <i>Deploy app to tenant</i>. We use <i>pnp/action-cli-deploy
</i>third party action to deploy our app using CLI for Microsoft 365. </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1119 height=696 id="Picture 70"
src="index_files/image060.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
60</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>We
have two options either deploy app at tenant level or deploy app to a site
collection. If you App Catalog is a site collection app catalog then you must
use</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>option
2 and if you it is a tenant app catalog you must use option 1. In our case it
is option 1.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=711 height=456 id="Picture 71"
src="index_files/image061.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
61</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
we deploy a package manually, we can select </span><span style='color:black'>'</span><span
style='font-size:14.0pt;line-height:107%;color:black'>Make this solution
available to all sites in the organization</span><span style='color:black'>'</span><span
style='font-size:14.0pt;line-height:107%;color:black'> option.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=646 height=155 id="Picture 72"
src="index_files/image062.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
62</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
this case <i>Added to all sites </i>is <i>Yes</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1193 height=93 id="Picture 73"
src="index_files/image063.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
63</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>When
we deploy it via GitHub actions then the value is <i>No</i>.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=581 height=665 id="Picture 74"
src="index_files/image064.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
64</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>In
this case we have to add it to the site manually.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><img border=0 width=1353 height=456 id="Picture 75"
src="index_files/image065.png"></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Figure
65</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>Our
SPFx Forums Hook Web part running.</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'> </span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%;color:black'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:14.0pt;line-height:107%'>&nbsp;</span></p>

</div>

</body>

</html>
